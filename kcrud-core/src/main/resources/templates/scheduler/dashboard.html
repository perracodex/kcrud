<!--
  ~ Copyright (c) 2024-Present Perracodex. Use of this source code is governed by an MIT license.
-->

<!DOCTYPE html>
<!--suppress ThymeleafVariablesResolveInspection -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/templates/scheduler/styles/layout.css">
    <link rel="stylesheet" href="/templates/scheduler/styles/buttons.css?v=1.2">
    <link rel="stylesheet" href="/templates/scheduler/styles/tables.css">
    <link rel="stylesheet" href="/templates/scheduler/styles/rows.css">
    <link rel="stylesheet" href="/templates/scheduler/styles/select.css">
    <title>Task Scheduler</title>
</head>
<body>
<div class="header">
    <label for="groupSelect"></label><select id="groupSelect" onchange="handleGroupChange()">
    <option value="all">All Groups</option>
</select>
</div>

<div class="buttons-container">
    <div class="left-buttons">
        <button class="refresh" onclick="refreshPage()">Refresh Tasks</button>
        <button class="pause-resume" id="toggleScheduler" onclick="toggleScheduler()">Pause Scheduler</button>
        <button class="audit" id="openFullAudit" onclick="openFullAudit()">Audit</button>
        <button class="clear-events" onclick="clearEvents()">Clear Events</button>
    </div>
    <button class="delete" onclick="deleteAll()">Delete All</button>
</div>

<div class="table-header">
    <span></span>
    <span>Group</span>
    <span>ID</span>
    <span>Consumer</span>
    <span>Next Fire Time</span>
    <span>State</span>
    <span>Outcome</span>
    <span>Schedule</span>
    <span>Runs</span>
    <span>Action</span>
</div>

<!-- Task Table Content -->
<div class="table-content">
    <!-- Task rows will be dynamically inserted here by JavaScript -->
</div>

<!-- Holds the real-time event logs -->
<div class="events-box" id="events"></div>

<script src="/templates/scheduler/scripts/scheduler-state.js"></script>
<script src="/templates/scheduler/scripts/initialize-page.js"></script>
<script src="/templates/scheduler/scripts/task-actions.js"></script>
<script src="/templates/scheduler/scripts/fetch-groups.js"></script>
<script src="/templates/scheduler/scripts/table-expand-collapse.js"></script>
<script src="/templates/scheduler/scripts/event-source.js"></script>
<script src="/templates/scheduler/scripts/scheduler-controls.js"></script>
<script src="/templates/scheduler/scripts/clear-events.js"></script>

</body>
</html>
